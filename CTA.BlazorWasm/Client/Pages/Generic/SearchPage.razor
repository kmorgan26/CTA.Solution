@page "/search"


<h3>
    <MudIcon Icon="@Icons.Material.Filled.Search" Size="Size.Large" Class="m-3" />
    Search
</h3>

<SearchComponent OnValidSubmit="DrawTable"></SearchComponent>

@if (_filtersSet == true)
{
    <TrackingReportComponent></TrackingReportComponent>
}

@code {

    [CascadingParameter]
    public AppStateComponent? appStateComponent { get; set; }

    private bool _filtersSet { get; set; } = false;

    void DrawTable()
    {
        _filtersSet = true;
    }

    protected override async Task OnInitializedAsync()
    {
        if(appStateComponent is not null && appStateComponent.RequestedDateTime.Date == DateTime.Today.Date)
        {
            await Task.Run(() => _filtersSet = true);
        }
    }
}