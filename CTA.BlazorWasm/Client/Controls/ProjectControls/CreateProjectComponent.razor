@inject IProjectRepo _threads
@inject NavigationManager _nav


<div class="row">
    <div class="col col-sm-12 col-md-6">
        <EditForm Model="@ProjectListVm" OnValidSubmit="@CreateProject">
            
            <FormFieldComponent LabelName="Project">
                <ControlToRender>
                    <InputText class="form-control" @bind-Value="ProjectListVm.Name" />
                </ControlToRender>
            </FormFieldComponent>
                           
            <button type="submit" class="btn btn-primary btn-sm">Update</button>

            <a href="/projects" class="btn btn-sm btn-danger">Cancel</a>

        </EditForm>
    </div>
</div>

@code {
    public ProjectListVm ProjectListVm { get; set; } = new();

    protected async Task CreateProject()
    {
        var project = Mapping.Mapper.Map<Project>(ProjectListVm);
        await _threads.AddAsync(project);
        _nav.NavigateTo("/projects");
    }
}
